Weights:
  DA3: "./weights/model.safetensors"
  DA3_CONFIG: "./weights/config.json"
  SALAD: "./weights/dino_salad.ckpt"

Model:
  chunk_size: 60
  overlap: 1
  loop_chunk_size: 1 # imgs of loop chunk = 2 * loop_chunk_size
  loop_enable: True
  useDBoW: False
  delete_temp_files: True
  align_lib: "triton" # choose among 'triton' (GPU), 'torch' (GPU), 'numba' (CPU) or 'numpy' (CPU)
  align_method: "sim3" # choose among 'sim3', 'se3' or 'scale+se3'
  scale_compute_method: "auto" # choose among 'auto', 'ransac' or 'weighted'. It is used when align_method == 'scale+se3'
  align_type: "dense" # choose between 'dense' or 'sparse'. Sparse uses feature matching (SIFT/ORB) for more robust alignment

  ref_view_strategy: "saddle_balanced" # 'middle', 'saddle_balanced', 'first' or 'saddle_sim_range'
  ref_view_strategy_loop: "saddle_balanced" # 'middle', 'saddle_balanced', 'first' or 'saddle_sim_range'
  depth_threshold: 15.0

  save_depth_conf_result: True
  save_debug_info: False

  Sparse_Align:
    feature_method: "orb" # choose among 'sift' or 'orb'
    max_features: 10 # maximum features to extract per image
    depth_threshold: 0.1 # minimum depth value to consider valid
    conf_threshold_ratio: 0.3 # confidence threshold = median(conf) * this ratio
    ransac_threshold: 0.5 # inlier distance threshold for RANSAC (relative to point cloud scale)
    ransac_iterations: 2000 # maximum RANSAC iterations
    min_inliers: 20 # minimum inliers required after RANSAC

  IRLS:
    delta: 0.1
    max_iters: 5
    tol: 1e-9

  Pose_Guided_Alignment:
    enable: False # Use predicted poses as additional anchor points for alignment
    pose_weight: 100.0 # Weight multiplier for pose points (higher = stronger influence)

  Color_Weighted_Alignment:
    enable: False # Use color similarity to weight point correspondences
    color_weight: 1.0 # Weight multiplier for color similarity (higher = stronger color influence)
    color_space: "lab" # Color space for similarity computation: 'rgb' or 'lab' (LAB is more perceptually uniform)
    similarity_threshold: 0.3 # Minimum color similarity (0-1) to keep a correspondence (lower = more permissive)

  Pointcloud_Save:
    sample_ratio: 0.015
    conf_threshold_coef: 0.75 # conf_threshold = np.mean(confs) * conf_threshold_coef

Loop:
  SALAD:
    image_size: [336, 336]
    batch_size: 32
    similarity_threshold: 0.85
    top_k: 5
    use_nms: True
    nms_threshold: 25

  SIM3_Optimizer:
    lang_version: "cpp"
    # choose between 'cpp' or 'python'. will auto set 'python' if c++ version has not installed
    max_iterations: 30
    lambda_init: 1e-6
